<!DOCTYPE html>
<html>
<head>
  <title>coffee.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "home/alex/a3/node-alinex/src/doc/coffeemd", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
  <script src="../../fileSearch.js"></script>
  <script src="../../goToLine.js"></script>
  <link rel="stylesheet" href="../../fileSearch.css" />
  <link rel="stylesheet" href="../../goToLine.css" />
</head>
<body>
  <nav>
<div class="logo"><a href="http://alinex.github.io" onmouseover="lllogo.src='https://alinex.github.io/images/Alinex-200.png'" onmouseout="lllogo.src='https://alinex.github.io/images/Alinex-black-200.png'">
  <img name="lllogo" src="https://alinex.github.io/images/Alinex-black-200.png" width="150" title="Alinex Universe Homepage" />
  </a>
  <img src="http://alinex.github.io/images/Alinex-200.png" style="display:none" alt="preloading" />
</div>
<div class="links">
  <a href="http://alinex.github.io/blog" class="btn btn-primary"><span class="glyphicon-cog"></span> Blog</a>
  <a href="http://alinex.github.io/code.html" class="btn btn-warning"><span class="glyphicon-pencil"></span> Code</a>
</div>
</nav><div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#coffeescript%20tips%20%26amp%3B%20tricks">CoffeeScript Tips &amp; Tricks</a>
      </div>
      <div class="heading h2">
        <a href="#strings">Strings</a>
      </div>
      <div class="heading h3">
        <a href="#check%20for%20substring">Check for substring</a>
      </div>
      <div class="heading h2">
        <a href="#objects">Objects</a>
      </div>
      <div class="heading h3">
        <a href="#check%20for%20empty%20object">Check for empty object</a>
      </div>
      <div class="heading h2">
        <a href="#control%20flow">Control flow</a>
      </div>
      <div class="heading h3">
        <a href="#try%20without%20catch">Try without catch</a>
      </div>
      <div class="heading h2">
        <a href="#for%20loops">For loops</a>
      </div>
      <div class="heading h2">
        <a href="#callbacks">Callbacks</a>
      </div>
      <div class="heading h2">
        <a href="#classes">Classes</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container" tabindex="0"><a id="fork" href="https://github.com/alinex/node-alinex" title="Fork me on GitHub"></a><div class="docs markdown">
<div class="pilwrap" id="coffeescript%20tips%20%26amp%3B%20tricks">
  <h1>
    <a href="#coffeescript%20tips%20%26amp%3B%20tricks" name="coffeescript%20tips%20%26amp%3B%20tricks" class="pilcrow">&#182;</a>
    CoffeeScript Tips &amp; Tricks
  </h1>
</div>


<p>CoffeeScript is used as development language because it is very easy to write
and read. In my opinion it makes development and maintenance easier and faster.
Specially in the callback sequences of JavaScript.</p>

<p>This page lists some tricks and tips which are mostly not mentioned in the
official docs.</p>

<p>Also in this documentation which is aimed for the alinex developer I often use
examples in coffee script. While in description of modules which may be used
anywhere I will use javascript so anybody can read it.</p>


<div class="pilwrap" id="strings">
  <h2>
    <a href="#strings" name="strings" class="pilcrow">&#182;</a>
    Strings
  </h2>
</div>



<div class="pilwrap" id="check%20for%20substring">
  <h3>
    <a href="#check%20for%20substring" name="check%20for%20substring" class="pilcrow">&#182;</a>
    Check for substring
  </h3>
</div>



<div class="highlight"><pre><code><span class="k">if</span> <span class="o">~</span><span class="nx">message</span><span class="p">.</span><span class="nx">indexOf</span> <span class="s">&#39;test&#39;</span>
</code></pre></div>



<p>The above syntax uses the tilde as bitwise or operator to get a boolean
readable value. If the substring is found it will be true (any number), and
false (0) if it isnâ€™t. or use the following to get a real boolean type:</p>


<div class="highlight"><pre><code><span class="nv">x = </span><span class="nb">Boolean</span> <span class="o">~</span><span class="nx">message</span><span class="p">.</span><span class="nx">indexOf</span> <span class="s">&#39;test&#39;</span>
</code></pre></div>



<p>Or use the negation:</p>


<div class="highlight"><pre><code><span class="k">if</span> <span class="o">!~</span><span class="nx">message</span><span class="p">.</span><span class="nx">indexOf</span> <span class="s">&#39;test&#39;</span>
</code></pre></div>




<div class="pilwrap" id="objects">
  <h2>
    <a href="#objects" name="objects" class="pilcrow">&#182;</a>
    Objects
  </h2>
</div>



<div class="pilwrap" id="check%20for%20empty%20object">
  <h3>
    <a href="#check%20for%20empty%20object" name="check%20for%20empty%20object" class="pilcrow">&#182;</a>
    Check for empty object
  </h3>
</div>



<div class="highlight"><pre><code><span class="k">unless</span> <span class="nx">obj</span><span class="o">?</span> <span class="o">and</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">).</span><span class="nx">length</span>
</code></pre></div>



<p>This will run the following code only if the object under test is not defined
or is an empty object.</p>


<div class="pilwrap" id="control%20flow">
  <h2>
    <a href="#control%20flow" name="control%20flow" class="pilcrow">&#182;</a>
    Control flow
  </h2>
</div>



<div class="pilwrap" id="try%20without%20catch">
  <h3>
    <a href="#try%20without%20catch" name="try%20without%20catch" class="pilcrow">&#182;</a>
    Try without catch
  </h3>
</div>



<div class="highlight"><pre><code><span class="k">try</span>
  <span class="nx">funcWhichMayThrowError</span><span class="p">()</span>
</code></pre></div>



<p>If you ommit the catch the error will be supressed.</p>


<div class="highlight"><pre><code><span class="k">try</span> <span class="p">{</span>
  <span class="nx">funcWhichMayThrowError</span><span class="p">();</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">_error</span><span class="p">)</span> <span class="p">{}</span>
</code></pre></div>




<div class="pilwrap" id="for%20loops">
  <h2>
    <a href="#for%20loops" name="for%20loops" class="pilcrow">&#182;</a>
    For loops
  </h2>
</div>


<p>Loop over array:</p>


<div class="highlight"><pre><code><span class="k">for</span> <span class="nx">element</span> <span class="k">in</span> <span class="nx">arr</span>
</code></pre></div>



<p>Counting loop:</p>


<div class="highlight"><pre><code><span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">..</span><span class="nx">n</span><span class="p">]</span> <span class="k">by</span> <span class="mi">1</span>
</code></pre></div>



<p>Reverse loop:</p>


<div class="highlight"><pre><code><span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">arr</span> <span class="k">by</span> <span class="o">-</span><span class="mi">1</span>
</code></pre></div>



<p>Loop over object:</p>


<div class="highlight"><pre><code><span class="k">for</span> <span class="nx">key</span> <span class="k">of</span> <span class="nx">object</span>
  <span class="p">...</span>
<span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">object</span>
  <span class="p">...</span>
</code></pre></div>




<div class="pilwrap" id="callbacks">
  <h2>
    <a href="#callbacks" name="callbacks" class="pilcrow">&#182;</a>
    Callbacks
  </h2>
</div>


<p>To prevent checking for a given callback method on every call you may give it
an empty default function on parameter definition:</p>


<div class="highlight"><pre><code><span class="nv">test = </span><span class="nf">(src, cb = -&gt; ) -&gt;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&#39;do something&#39;</span>
  <span class="nx">cb</span><span class="p">()</span>
</code></pre></div>




<div class="pilwrap" id="classes">
  <h2>
    <a href="#classes" name="classes" class="pilcrow">&#182;</a>
    Classes
  </h2>
</div>


<p>Classes are made really easy using CoffeeScript:</p>


<div class="highlight"><pre><code><span class="c1"># define a class</span>
<span class="k">class</span> <span class="nx">Test</span>
  <span class="c1"># make a constructor method</span>
  <span class="nv">constructor: </span><span class="nf">-&gt;</span>

<span class="c1"># create instance</span>
<span class="nv">t = </span><span class="k">new</span> <span class="nx">Test</span>
</code></pre></div>



<p>Use the <code>@</code> sign in parameters to store the value in the same instance property:</p>


<div class="highlight"><pre><code><span class="k">class</span> <span class="nx">Test</span>
  <span class="c1"># store given name in this.name</span>
  <span class="nv">constructor: </span><span class="nf">(@name) -&gt;</span>

<span class="c1"># add another prototype to class</span>
<span class="nv">Test::done = </span><span class="kc">true</span>
</code></pre></div>



<p>Inheritance is also made easy:</p>


<div class="highlight"><pre><code><span class="k">class</span> <span class="nx">Test</span>
  <span class="nv">constructor: </span><span class="nf">(@name) -&gt;</span>

<span class="c1"># extend the class</span>
<span class="k">class</span> <span class="nx">Test2</span> <span class="k">extends</span> <span class="nx">Test</span>
  <span class="nv">constructor: </span><span class="nf">-&gt;</span>
    <span class="c1"># call the parent constructor</span>
    <span class="k">super</span> <span class="s">&#39;numberTwo&#39;</span>
</code></pre></div>



<p>Local variables are created using <code>=</code> but properties are defined using <code>:</code>:</p>


<div class="highlight"><pre><code><span class="k">class</span> <span class="nx">Test</span>
  <span class="c1"># local class variable/function</span>
  <span class="nv">foo = </span><span class="mi">1</span>
  <span class="c1"># instance variable/function</span>
  <span class="nv">bar: </span><span class="mi">2</span>
  <span class="c1"># or from the constructor</span>
  <span class="nv">constructor: </span><span class="nf">-&gt;</span>
    <span class="vi">@baz = </span><span class="mi">3</span>
</code></pre></div>



<p>You may also use class properties/funtions</p>


<div class="highlight"><pre><code><span class="k">class</span> <span class="nx">Test</span>
  <span class="c1"># static class variable/function</span>
  <span class="vi">@foo: </span><span class="mi">1</span>
  <span class="vi">@bar: </span><span class="nf">(name) -&gt;</span>
  <span class="nv">constructor: </span><span class="nf">-&gt;</span>
    <span class="c1"># access statics</span>
    <span class="nx">Test</span><span class="p">.</span><span class="nx">bar</span><span class="p">()</span>
    <span class="c1"># or</span>
    <span class="nx">@constructor</span><span class="p">.</span><span class="nx">bar</span><span class="p">()</span>

<span class="c1"># access from outside</span>
<span class="nx">Test</span><span class="p">.</span><span class="nx">foo</span>
<span class="nx">Test</span><span class="p">.</span><span class="nx">bar</span> <span class="s">&#39;baz&#39;</span>
<span class="nv">test = </span><span class="k">new</span> <span class="nx">Test</span>
<span class="nx">test</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">foo</span>
</code></pre></div>

</div>
  </div>
</body>
</html>
